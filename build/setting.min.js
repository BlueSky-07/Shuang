"use strict";function _slicedToArray(a,b){return _arrayWithHoles(a)||_iterableToArrayLimit(a,b)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(a,b){if(Symbol.iterator in Object(a)||"[object Arguments]"===Object.prototype.toString.call(a)){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!(b&&c.length===b));d=!0);}catch(a){e=!0,f=a}finally{try{d||null==h["return"]||h["return"]()}finally{if(e)throw f}}return c}}function _arrayWithHoles(a){if(Array.isArray(a))return a}Shuang.app.setting={config:{},reload:function reload(){this.config={scheme:readStorage("scheme")||"ziranma",mode:readStorage("mode")||"all-random",showPic:readStorage("showPic")||"true",darkMode:readStorage("darkMode")||(6<=new Date().getHours()&&22>=new Date().getHours()?"false":"true"),autoNext:readStorage("autoNext")||"true",autoClear:readStorage("autoClear")||"true"};var a=this.config,b=a.scheme,c=a.mode,d=a.showPic,e=a.darkMode,f=a.autoNext,g=a.autoClear;Array.prototype.find.call($("#scheme-select").children,function(a){return Shuang.resource.schemeList[b].startsWith(a.innerText)}).selected=!0,$("#mode-select")[Object.keys(Shuang.app.modeList).indexOf(c)].selected=!0,$("#pic-switcher").checked="true"===d,$("#dark-mode-switcher").checked="true"===e,$("#auto-next-switcher").checked="true"===f,$("#auto-clear-switcher").checked="true"===g,this.setScheme(Shuang.resource.schemeList[b],!1),this.setMode(Shuang.app.modeList[c].name),this.setPicVisible(d),this.setDarkMode(e),this.setAutoNext(f),this.setAutoClear(g)},setScheme:function setScheme(a){var b=this,c=!(1<arguments.length&&arguments[1]!==void 0)||arguments[1];this.config.scheme=Object.keys(Shuang.resource.schemeList)[Object.values(Shuang.resource.schemeList).findIndex(function(b){return b.startsWith(a)})],importJS("scheme/"+this.config.scheme,function(){c&&Shuang.app.action.next(),b.updateTips()}),writeStorage("scheme",this.config.scheme)},setMode:function setMode(a){Shuang.core.history=[];for(var b=0,c=Object.entries(Shuang.app.modeList);b<c.length;b++){var d=_slicedToArray(c[b],2),e=d[0],f=d[1].name;if(f===a){this.config.mode=e,$("#mode-desc").innerText=Shuang.app.modeList[e].desc,$("#q").style.display="hard-random-without-pinyin"===e?"none":"block";break}}writeStorage("mode",this.config.mode)},setPicVisible:function setPicVisible(a){this.config.showPic=a.toString(),"false"===this.config.showPic?$("#keyboard").style.display="none":"true"===this.config.showPic&&($("#keyboard").style.display="block"),writeStorage("showPic",this.config.showPic)},setDarkMode:function setDarkMode(a){this.config.darkMode=a.toString(),"true"===this.config.darkMode?$("body").setAttribute("class","dark-mode"):"false"===this.config.darkMode&&$("body").setAttribute("class",""),writeStorage("darkMode",this.config.darkMode)},setAutoNext:function setAutoNext(a){this.config.autoNext=a.toString(),writeStorage("autoNext",this.config.autoNext)},setAutoClear:function setAutoClear(a){this.config.autoClear=a.toString(),writeStorage("autoClear",this.config.autoClear)},updateTips:function updateTips(){var a=$("#tips");a.innerHTML="";var b=Shuang.resource.scheme[this.config.scheme];if(b.tips){var c=Array.isArray(b.tips)?b.tips:[b.tips],d=!0,e=!1,f=void 0;try{for(var g,h=c[Symbol.iterator]();!(d=(g=h.next()).done);d=!0){var i=g.value,j=document.createElement("div");j.className="line",j.innerHTML=i,a.appendChild(j)}}catch(a){e=!0,f=a}finally{try{d||null==h["return"]||h["return"]()}finally{if(e)throw f}}}$("#pic").setAttribute("src","img/".concat(this.config.scheme,".png"))}};function readStorage(){var a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"";return localStorage.getItem(a)}function writeStorage(){var a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",b=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"";localStorage.setItem(a,b)}